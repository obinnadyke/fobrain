/*! Chartinator jQuery plugin 2015-06-15 version: 0.3.10 */
!function(a,b,c,d){"use strict";var e=function(c,e){var f=this;return f.chartS=a(c),f.tableS=f.chartS,f.fontFamily=a("body").css("font-family").replace(/["']{1}/gi,"")||"Arial, Helvetica, sans-serif",f.optionsInit={urlJSAPI:"https://www.google.com/jsapi",googleSheetKey:!1,columns:!1,colIndexes:!1,rows:!1,tableSel:!1,dataTitle:!1,createTable:!1,ignoreRow:[],ignoreCol:[],transpose:!1,tooltipConcat:!1,annotationConcat:!1,chartType:"BarChart",chartId:"c24_chart_"+d.random().toString(36).substr(2,9),chartClass:"chtr-chart",tableId:"c24_table_"+d.random().toString(36).substr(2,9),tableClass:"chtr-table",chartAspectRatio:!1,chartZoom:0,chartOffset:!1,chartEvents:!1,barChart:{fontSize:!1,fontName:f.fontFamily,chartArea:{left:"20%",top:40,width:"75%",height:"85%"},legend:{position:"bottom"}},pieChart:{fontSize:!1,fontName:f.fontFamily,chartArea:{left:"6%",top:40,width:"94%",height:"100%"}},columnChart:{fontSize:!1,fontName:f.fontFamily,chartArea:{left:"15%",top:40,width:"85%",height:"70%"},legend:{position:"bottom"}},lineChart:{fontSize:!1,fontName:f.fontFamily,chartArea:{left:"15%",top:40,width:"80%",height:"70%"},legend:{position:"bottom"}},areaChart:{fontSize:!1,fontName:f.fontFamily,chartArea:{left:"15%",top:40,width:"80%",height:"70%"},legend:{position:"bottom"}},geoChart:{titleTextStyle:{tag:"h3"}},calendar:{cellScaleFactor:.017,titleTextStyle:{color:"#000",fontWeight:"bold",fontName:f.fontFamily,fontSize:""},calendar:{monthLabel:{fontSize:!1,fontName:f.fontFamily},dayOfWeekLabel:{fontSize:!1,fontName:f.fontFamily}},tooltip:{textStyle:{color:"#000",fontName:f.fontFamily,fontSize:16}}},table:{fontName:f.fontFamily,formatter:{type:"none",column:1},allowHtml:!0,cssClassNames:{headerRow:"headerRow",tableRow:"tableRow",oddTableRow:"oddTableRow",selectedTableRow:"selectedTableRow",hoverTableRow:"hoverTableRow",headerCell:"headerCell",tableCell:"tableCell",rowNumberCell:"rowNumberCell"}},showTable:"hide",showTableCSS:{position:"static",top:0,width:""},hideTableCSS:{position:"absolute",top:"-99999px",width:f.tableS.width()},showChartCSS:{},hideChartCSS:{opacity:0}},f.chartOptions={},f.cchartOptions={},f.timer=!1,f.chartId=f.optionsInit.chartId,f.tableId=f.optionsInit.tableId,f.tableHasData=!1,f.tableCaption=!1,f.tableTitle=!1,f.googleSheetData=!1,f.dataArray=[],f.chartPackage="corechart",f.coreCharts=["BarChart","ColumnChart","PieChart","AreaChart","BubbleChart","CandlestickChart","ComboChart","Histogram","LineChart","ScatterChart","SteppedAreaChart"],f.chartParent=!1,f.windowWidth=!1,f.chartParentWidth=!1,f.init=function(b,c){f.options=a.extend(!0,{},f.optionsInit,c),f.chartId=c.chartId||f.chartS.attr("id")||f.options.chartId,f.options.tableSel&&(f.tableS=a(f.options.tableSel+" td").length?a(f.options.tableSel):f.tableS),f.tableHasData=f.tableS.find("td").length,f.chartS[0]===f.tableS[0]&&(f.tableHasData?(f.chartId=f.options.chartId,f.chartS=a('<div id="'+f.chartId+'" class="'+f.chartId+" "+f.options.chartClass+'"></div>').insertAfter(f.tableS)):f.tableS=!1),f.chartS.addClass(f.chartId+" "+f.options.chartClass).attr("id",f.chartId),f.tableHasData?(f.tableId=c.tableId||f.tableS.attr("id")||f.options.tableId,f.tableS.addClass(f.tableId+" "+f.options.tableClass).attr("id",f.tableId),f.tableCaption=f.tableS.find("caption")):f.tableId=f.options.tableId,f.chartParent=f.chartS.parent(),f.options.googleSheetKey?f.getGoogleSheet(f.options.googleSheetKey,f.setupChart):f.setupChart()},f.getGoogleSheet=function(b,c){a.ajax({type:"GET",url:"https://spreadsheets.google.com/spreadsheet/pub?key="+b+"&output=csv",dataType:"text"}).done(function(a){f.googleSheetData=a,c()}).fail(function(a){f.googleSheetData=a,c(),console.log("Google Sheet failed")})},f.setupChart=function(){if(f.dataArray=f.collectData(),!f.dataArray.length)return f.showTableChart("show","remove"),void console.log("No data found in data array");if(-1===f.coreCharts.indexOf(f.options.chartType)&&(f.chartPackage=f.options.chartType.toLowerCase()),f.options.chartOptions?f.chartOptions=f.options.chartOptions:f.options[f.camelCase(f.options.chartType)]&&(f.chartOptions=f.options[f.camelCase(f.options.chartType)]),f.cchartOptions=a.extend(!0,{},f.chartOptions),f.tableTitle=f.options.dataTitle,f.tableTitle===!1&&(f.tableTitle=f.cchartOptions.title||"The Chart Data"),f.options.createTable){var b=!1;b="table-chart"===f.options.createTable?a('<div id="'+f.tableId+'" class="'+f.tableId+" "+f.options.tableClass+'"></div>'):f.generateTable(f.dataArray,f.tableTitle,f.tableId,f.options.tableClass),f.tableHasData?f.tableS.replaceWith(b):f.tableS=b.insertBefore(f.chartS)}else f.tableHasData&&f.tableTitle&&(f.tableCaption.length?f.tableCaption.text(f.tableTitle):(f.tableS.prepend("<caption>"+f.tableTitle+"</caption>"),f.tableCaption=f.tableS.find("caption")));f.showTableChart("hide","hide");try{a.ajax({url:f.options.urlJSAPI,dataType:"script",cache:!0}).done(function(){google.load("visualization","1",{packages:[f.chartPackage],callback:f.drawChart}),f.addResize()}).fail(function(){f.showTableChart("show","remove")})}catch(c){f.showTableChart("show","remove"),console.log(c)}},f.collectData=function(){var b=[];if(f.googleSheetData&&!f.googleSheetData.statusText?b=f.formatSheet(f.googleSheetData):f.googleSheetData&&console.log(f.googleSheetData),f.tableHasData&&(b=f.getTableData(f.tableS)),f.options.columns&&f.options.columns.length)if(b[0]&&b[0][0]&&b[0][0].label)if(f.options.colIndexes&&f.options.colIndexes.length)for(var c=0;c<f.options.colIndexes.length;c++)b[0].splice(f.options.colIndexes[c],0,f.options.columns[c]);else b[0]=f.options.columns;else b.unshift(f.options.columns);if(f.options.rows&&f.options.rows.length&&b.length)if(f.options.colIndexes&&f.options.colIndexes.length)for(var c=0;c<f.options.rows.length;c++)for(var d=0;d<f.options.colIndexes.length;d++)b[c+1].splice(f.options.colIndexes[d],0,f.options.rows[c][d]);else a.merge(b,f.options.rows);return b},f.drawChart=function(){if(f.data=new google.visualization.arrayToDataTable(f.dataArray),!f.data||!f.data.getNumberOfRows())return f.showTableChart("show","remove"),void console.log("Google Charts data table failed");if(f.cchartOptions.formatter&&"none"!==f.cchartOptions.formatter.type){var c=new google.visualization[f.cchartOptions.formatter.type](f.cchartOptions.formatter);c.format(f.data,f.cchartOptions.formatter.column)}if(f.cchartOptions.title=f.tableHasData&&"undefined"==typeof f.cchartOptions.title?f.tableCaption.text()||"":f.cchartOptions.title||"","Calendar"===f.options.chartType&&(f.cchartOptions.calendar.cellSize=f.cchartOptions.calendar.cellSize||f.chartS.width()*f.cchartOptions.cellScaleFactor),f.cchartOptions.fontSize&&(f.cchartOptions.fontSize=f.getFontSize(f.cchartOptions.fontSize,16)),f.cchartOptions.titleTextStyle&&f.cchartOptions.titleTextStyle.fontSize&&(f.cchartOptions.titleTextStyle.fontSize=f.getFontSize(f.cchartOptions.titleTextStyle.fontSize,20)),f.cchartOptions.calendar&&(f.cchartOptions.calendar.monthLabel&&f.cchartOptions.calendar.monthLabel.fontSize&&(f.cchartOptions.calendar.monthLabel.fontSize=f.getFontSize(f.cchartOptions.calendar.monthLabel.fontSize,16)),f.cchartOptions.calendar.dayOfWeekLabel&&f.cchartOptions.calendar.dayOfWeekLabel.fontSize&&(f.cchartOptions.calendar.dayOfWeekLabel.fontSize=f.getFontSize(f.cchartOptions.calendar.dayOfWeekLabel.fontSize,16))),f.setDimensions(),"BarChart"===f.options.chartType&&!f.options.chartAspectRatio&&!f.chartOptions.height){var d=f.cchartOptions.fontSize||f.getFontSize("body",16);f.cchartOptions.height=2*d*f.data.getNumberOfRows()}if("table-chart"===f.options.createTable&&(f.tableS=a("#"+f.tableId).chartinator({columns:f.dataArray[0],rows:f.dataArray.slice(1),chartType:"Table",chartId:f.options.tableId,chartClass:f.options.tableClass,table:{title:f.options.dataTitle}})),"Calendar"===f.options.chartType){var e=a(".tooltip-calendar-styles");e.length||(e=a('<style class="tooltip-calendar-styles"></style>').appendTo("head")),e.text("."+f.chartId+" .google-visualization-tooltip span { color: "+f.cchartOptions.tooltip.textStyle.color+" !important; font-size: "+f.cchartOptions.tooltip.textStyle.fontSize+'px !important; font-family: "'+f.cchartOptions.tooltip.textStyle.fontName+'" !important; }')}if(f.chart=new google.visualization[f.options.chartType](f.chartS.get(0)),google.visualization.events.addListener(f.chart,"ready",function(){if(f.showTableChart(f.options.showTable,"show"),f.windowWidth=a(b).width(),f.chartParentWidth=f.chartParent.width(),"Table"===f.options.chartType){var c=f.chartS.find("table");c.css({fontSize:f.cchartOptions.fontSize,fontFamily:f.cchartOptions.fontName}),f.cchartOptions.title&&c.prepend("<caption>"+f.cchartOptions.title+"</caption>")}if("GeoChart"===f.options.chartType&&f.cchartOptions.title&&!f.chartS.children(".chart-title").length){var d=a("<"+f.options.geoChart.titleTextStyle.tag+' class="chart-title">'+f.cchartOptions.title+"</"+f.options.geoChart.titleTextStyle.tag+">");d.css({position:"relative",zIndex:1,backgroundColor:"#fff",padding:"0 .5em"}),f.chartS.prepend(d)}if(f.options.chartZoom||f.options.chartOffset&&f.options.chartOffset.length){var e=a(".tooltip-zoom-offset-styles"),g="",h=f.chartS.children(":last"),i=0,j=0,k=parseFloat(f.options.chartZoom)||0,l=1/k||1,m=parseInt(f.options.chartOffset[0])||0,n=parseInt(f.options.chartOffset[1])||0;m=m*f.chartS.width()*k/100,n=n*f.chartS.height()*k/100,k&&(g="scale("+k+")",i=(f.chartS.height()*k-f.chartS.height())/2/k,j=(f.chartS.width()*k-f.chartS.width())/2/k),(m||n)&&(g+=" translate("+m+"px,"+n+"px)",i-=n,j-=m),h.css("transform",g),f.chartS.css("overflow","hidden"),e.length||(e=a('<style class="tooltip-zoom-offset-styles"></style>').appendTo("head")),e.text("."+f.chartId+" .google-visualization-tooltip { top: "+i+"px !important; left: "+j+"px !important; transform: scale("+l+")}")}"Calendar"===f.options.chartType&&f.cchartOptions.title&&f.chartS.find('text:contains("'+f.cchartOptions.title+'")').css({fill:f.cchartOptions.titleTextStyle.color,fontWeight:f.cchartOptions.titleTextStyle.fontWeight,fontSize:f.cchartOptions.titleTextStyle.fontSize,fontFamily:f.cchartOptions.titleTextStyle.fontName})}),google.visualization.events.addListener(f.chart,"error",function(a){f.showTableChart("show","remove"),console.log(a)}),f.options.chartEvents&&f.options.chartEvents.length)for(var g=0;g<f.options.chartEvents.length;g++){var h=f.options.chartEvents[g].event,i=f.options.chartEvents[g].handler;google.visualization.events.addListener(f.chart,h,i)}f.chart.draw(f.data,f.cchartOptions)},f.formatSheet=function(a){var b=[];if(a&&!a.statusText)try{for(var c=a.split(/\r\n|\n/),d=[],e=0;e<c.length;e++)c[e]=c[e].split(",");f.options.transpose&&(c=f.transpose(c)),d=c[0];for(var e=0;e<d.length;e++)d[e]="TOOLTIP"===d[e].toUpperCase()?{type:"string",role:"tooltip"}:"ANNOTATION"===d[e].toUpperCase()?{type:"string",role:"annotation"}:{label:d[e]};b=c,b[0]=d,b=f.formatData(b)}catch(g){console.log(g)}return b},f.getTableData=function(b){var c=[];try{var d=b.find("tr").not(b.find("tfoot tr")),e=[];d.each(function(b){e.push([]),a(this).find("td, th").each(function(){var c=a(this),d={};c.attr("data-type")&&(d.type=c.attr("data-type")),c.attr("data-role")&&(d.role=c.attr("data-role")),d.label=c.text(),e[b].push(d)})}),f.options.transpose&&(e=f.transpose(e)),c.push(e[0]);for(var g=1;g<e.length;g++){for(var h=[],i=0;i<e[g].length;i++){var j=e[g][i].label||"";h.push(j)}h.length>0&&c.push(h)}c=f.formatData(c)}catch(k){return console.log(k),[]}return c},f.formatData=function(b){var c=b;try{var d=[],e=[],g=[],h=function(a,b){return-1===f.options.ignoreRow.indexOf(b)},i=function(a,b){return-1===f.options.ignoreCol.indexOf(b)},j=function(a,b){return-1===d.indexOf(b)};f.options.tooltipConcat&&e.push("tooltip"),f.options.annotationConcat&&e.push("annotation"),c=a.grep(c,h);for(var k=0;k<c.length;k++)c[k]=a.grep(c[k],i);if(e.length){for(var l="",m=0;m<c[0].length;m++){var n=c[0][m].role||"";n&&-1!==e.indexOf(n)&&d.push(m)}for(var k=0;k<c.length;k++)c[k]=a.grep(c[k],j);for(var m=0;m<c[0].length;m++){var n=c[0][m].role||"",o=c[0][m].label||"";if(("domain"===n||0===m)&&(l=c[0][m]),(!n||-1===e.indexOf(n))&&m>0)for(var k=0;k<e.length;k++)m++,c[0].splice(m,0,{type:"string",role:e[k]}),g.push({index:m,domain:l,role:e[k],label:o})}for(var m=1;m<c.length;m++)for(var k=0;k<g.length;k++){var p="";"toolip"===g[k].role?p=f.options.tooltipConcat:"annotation"===g[k].role&&(p=f.options.annotationConcat),p=p.replace(new RegExp("domain","g"),g[k].domain),p=p.replace(new RegExp("label","g"),g[k].label),p=p.replace(new RegExp("data","g"),c[m][g[k].index]),c[m].splice(g[k].index,0,p)}}for(var m=1;m<c.length;m++){for(var q=[],k=0;k<c[m].length;k++){var r=c[0][k].type||"",s=c[0][k].role||"",t=c[m][k]||"";if(-1===["tooltip","annotation"].indexOf(s))if("date"===r||"datetime"===r)t=new Date(t);else if("number"===r)t=parseFloat(t);else if("boolean"===r){var u=t.toLowerCase();t="false"!==u&&"0"!==u&&"no"!==u&&""!==u}else"timeofday"===r?t=t.getTime():0!==k&&(isNaN(parseFloat(t))?"Invalid Date"===new Date(t)||isNaN(new Date(t))||(t=new Date(t)):t=parseFloat(t));q.push(t)}q.length>0&&(c[m]=q)}}catch(v){return console.log(v),[]}return c},f.generateTable=function(b,c,d,e){for(var f='<table id="'+d+'" class="'+d+" "+e+'"><caption>'+c+"</caption><thead><tr>",g=0;g<b[0].length;g++)b[0][g].role&&"tooltip"===b[0][g].role?f+="<th>Tooltip</th>":b[0][g].role&&"annotation"===b[0][g].role?f+="<th>Annotation</th>":b[0][g].label&&(f+="<th>"+b[0][g].label+"</th>");f+="</tr></thead><tbody>";for(var g=1;g<b.length;g++){f+="<tr>";for(var h=0;h<b[g].length;h++){var i=isNaN(b[g][h])?"left":"right";f+='<td align="'+i+'">'+b[g][h]+"</td>"}f+="</tr>"}return f+="</tbody></table>",a(f)},f.addResize=function(){a(b).on({resize:function(){clearTimeout(f.timer),f.timer=setTimeout(function(){if(a(b).width()!==f.windowWidth){var c=f.chartS.attr("style");f.chartS.removeAttr("style"),f.chartParent.width()!==f.chartParentWidth?(f.cchartOptions.calendar&&!f.options.calendar.calendar.cellSize&&(f.cchartOptions.calendar.cellSize=.017*f.chartS.width()),f.setDimensions(),f.chart.draw(f.data,f.cchartOptions)):f.chartS.attr("style",c)}},500)}})},f.showTableChart=function(a,b){var c=f.tableS?f.tableS.length:!1,d=f.chartS?f.chartS.length:!1;"show"===a&&c?(f.tableS.css("opacity",0),f.tableS.css(f.options.showTableCSS),f.tableS.fadeTo(400,1)):"hide"===a&&c?f.tableS.css(f.options.hideTableCSS):"remove"===a&&c&&f.tableS.css("display","none"),"show"===b&&d?(f.chartS.css("opacity",0),f.chartS.css(f.options.showChartCSS),f.chartS.fadeTo(400,1)):"hide"===b&&d?f.chartS.css(f.options.showChartCSS):"remove"===b&&d&&f.chartS.css("display","none")},f.getFontSize=function(b,c){var d=c||16;if(parseInt(b,10))d=parseInt(b,10);else if(a(b).length)d=parseInt(a(b).css("fontSize"),10)||d;else{var e=a("<"+b+"></"+b+">");f.chartS.append(e),d=parseInt(e.css("fontSize"),10)||d,e.remove()}return d},f.transpose=function(a){for(var b=new Array(a[0].length),c=0;c<a[0].length;c++){b[c]=new Array(a.length);for(var d=0;d<a.length;d++)b[c][d]=a[d][c]}return b},f.setDimensions=function(){var a=isNaN(f.chartOptions.width)?!1:parseFloat(f.chartOptions.width),b=isNaN(f.chartOptions.height)?!1:parseFloat(f.chartOptions.height),c=isNaN(f.options.chartAspectRatio)?!1:parseFloat(f.options.chartAspectRatio);f.chartParentWidth=f.chartParent.width(),c?a&&!b?f.cchartOptions.height=a/c:!a&&b?f.cchartOptions.width=b*c:a||b||(f.cchartOptions.width=f.chartS.width(),f.cchartOptions.height=f.chartS.width()/c):a||b||(f.cchartOptions.width=f.chartS.width())},f.camelCase=function(a){return a.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(a,b){return 0===+a?"":0===b?a.toLowerCase():a.toUpperCase()})},f.init(c,e),this};a.fn.chartinator=function(b){return this.each(function(){var c=a(this);c.data("chartinator")||a(this).data("chartinator",new e(this,b))})}}(jQuery,window,document,Math);